<div class="container py-5">
  <h2 class="mb-4">Saved Recipe Suggestions</h2>

  <!-- ğŸ” Search bar -->
  <div class="input-group mb-3" *ngIf="recipes.length > 0">
    <input
      type="text"
      class="form-control"
      placeholder="Search recipes..."
      [(ngModel)]="searchTerm"
    />
    <button
      class="btn btn-outline-secondary"
      (click)="searchTerm = ''"
      title="Clear search"
    >
      ğŸ”
    </button>
  </div>

  <!-- â„¹ï¸ No recipes message -->
  <div *ngIf="recipes.length === 0" class="alert alert-info">
    No saved recipes yet! Try generating some first.
  </div>

  <!-- ğŸ§¾ Recipe list -->
  <div *ngIf="filteredRecipes.length > 0">
    <button (click)="clearRecipes()" class="btn btn-danger mb-3">
      Clear Saved Recipes
    </button>

    <div
      *ngFor="let recipe of filteredRecipes; let i = index"
      class="card mb-3 shadow-sm"
    >
      <div class="card-body">
        <h5 class="card-title">
          Recipe #{{ i + 1 }}

          <!-- ğŸ‘¨â€ğŸ³ Chef AI badge -->
          <span
            *ngIf="$any(recipe).source === 'chef'"
            class="badge bg-warning text-dark ms-2"
            title="Generated by Chef AI"
          >
            ğŸ‘¨â€ğŸ³ Chef AI
          </span>

          <!-- âŒ Delete button -->
          <button
            class="btn btn-sm btn-outline-danger ms-2"
            (click)="deleteRecipe(recipe)"
            title="Delete this recipe"
          >
            âœ–
          </button>
        </h5>
        <small class="text-muted">Generated on: {{ recipe.date }}</small>
        <hr />
        <pre
          [innerHTML]="highlightText(recipe.text)"
          class="highlighted-text"
        ></pre>
      </div>
    </div>
  </div>

  <!-- No match after search -->
  <div
    *ngIf="recipes.length > 0 && filteredRecipes.length === 0"
    class="alert alert-warning"
  >
    No recipes found for "{{ searchTerm }}".
  </div>
</div>
